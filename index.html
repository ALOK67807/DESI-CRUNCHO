<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Desi Cruncho - Homemade Snacks</title>
  <meta name="description" content="Desi Cruncho ‚Äì Authentic homemade snacks like Thekua & Nimki delivered across Navi Mumbai. Pure taste, pure tradition. Order now!">
  <meta name="keywords" content="Desi Cruncho, homemade snacks, Thekua, Nimki, Vashi snacks, Navi Mumbai snacks, traditional Indian snacks">
  <meta name="author" content="Desi Cruncho Team">
  <link rel="icon" href="logo.png" />
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-orange-50 text-gray-800">

  <!-- Header -->
  <header class="bg-white shadow-md">
    <div class="max-w-7xl mx-auto px-4 py-4 flex items-center justify-between">
      <div class="flex items-center space-x-4">
        <img src="logo.png" alt="Desi Cruncho Logo" class="h-10 w-10 rounded-full"/>
        <h1 class="text-2xl font-bold text-orange-600">Desi Cruncho</h1>
      </div>
      <nav class="space-x-6 font-semibold text-gray-700">
        <a href="#home" class="hover:text-orange-600">Home</a>
        <a href="#products" class="hover:text-orange-600">Products</a>
        <a href="#about" class="hover:text-orange-600">About Us</a>
        <a href="#feedback" class="hover:text-orange-600">Rate Us</a>
        <a href="#contact" class="hover:text-orange-600">Contact</a>
      </nav>
    </div>
  </header>

  <!-- Hero -->
  <section id="home">
    <div class="bg-cover bg-center py-32 text-center text-white" style="background-image: url('hero-bg.jpg');">
      <h2 class="text-4xl font-bold drop-shadow-md">Welcome to Desi Cruncho</h2>
      <p class="mt-4 text-xl font-medium drop-shadow-md">Enjoy the taste of tradition with our handmade snacks!</p>
    </div>
  </section>

  <!-- Products with Coupon -->
  <section id="products" class="py-12 bg-white">
    <div class="max-w-6xl mx-auto px-4">

      <!-- Coupon Feature -->
      <div id="coupon-section" class="text-center mb-8 p-4 bg-yellow-100 rounded-xl shadow-md">
        <h3 class="text-xl font-bold mb-2">Festive Season Offer üéâ</h3>
        <p class="mb-2">Get 15% OFF on Thekua & Nimki! Use Coupon Code:</p>
        <input 
          type="text" 
          id="coupon-code" 
          placeholder="Enter Coupon Code" 
          class="p-2 border rounded-lg w-2/3"
        >
        <button 
          onclick="applyCoupon()" 
          class="bg-green-500 text-white px-4 py-2 rounded-lg ml-2 hover:bg-green-600 transition">
          Apply
        </button>
        <p id="coupon-message" class="mt-2 text-sm"></p>
      </div>

      <h2 class="text-2xl font-bold text-center text-orange-700 mb-8">Our Products</h2>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
        <!-- Thekua -->
        <div class="bg-orange-50 p-6 rounded-xl shadow">
          <img src="thekua.jpg" alt="Thekua" class="w-full h-auto max-h-60 object-contain rounded-t-xl mb-4">
          <h3 class="text-xl font-semibold text-orange-800">Thekua (800gm)</h3>
          <p id="thekua-price" class="text-lg text-green-700 font-bold">Price: ‚Çπ280</p>
          <a id="thekua-link" href="#" class="order-button inline-block mt-4 bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg" data-product="Thekua">Order on WhatsApp</a>
        </div>
        <!-- Nimki -->
        <div class="bg-orange-50 p-6 rounded-xl shadow">
          <img src="nimki.jpg" alt="Nimki" class="w-full h-auto max-h-60 object-contain rounded-t-xl mb-4">
          <h3 class="text-xl font-semibold text-orange-800">Nimki (800gm)</h3>
          <p id="nimki-price" class="text-lg text-green-700 font-bold">Price: ‚Çπ300</p>
          <a id="nimki-link" href="#" class="order-button inline-block mt-4 bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg" data-product="Nimki">Order on WhatsApp</a>
        </div>
      </div>
    </div>
  </section>

  <!-- About -->
  <section id="about" class="bg-orange-100 py-12 px-4">
    <div class="max-w-4xl mx-auto text-center">
      <h2 class="text-2xl font-bold text-orange-700 mb-4">Our Story</h2>
      <p class="text-lg text-gray-700">
        At <strong>Desi Cruncho</strong>, we believe in the magic of tradition. Born from the love of authentic homemade snacks,
        our journey started in a small kitchen in Vashi, Navi Mumbai. Every Thekua and Nimki we make carries the essence of
        warmth, simplicity, and grandma's recipes. Your trust is our biggest ingredient, and your satisfaction is our reward.
      </p>
    </div>
  </section>

  <!-- Feedback -->
  <section id="feedback" class="bg-white py-12 px-4">
    <div class="max-w-3xl mx-auto text-center">
      <h2 class="text-2xl font-bold text-orange-700 mb-4">Rate Us</h2>
      <p class="italic text-gray-600 mb-6">‚ÄúYour feedback is the secret ingredient that makes Desi Cruncho more delicious.‚Äù</p>
      <div class="mb-8">
        <iframe src="https://docs.google.com/forms/d/e/1FAIpQLSdfC5o37vGXiNiyDS4glnvzqc1awsT45XZM6cdMk8ZSxYLfiw/viewform?embedded=true" width="100%" height="800" frameborder="0" marginheight="0" marginwidth="0">Loading‚Ä¶</iframe>
      </div>

      <!-- Live Feedback Table -->
      <div class="max-w-4xl mx-auto mt-12 bg-white p-6 rounded-xl shadow">
        <h3 class="text-xl font-bold text-orange-700 mb-4 text-center">‚≠ê What Our Customers Are Saying</h3>
        <table id="feedback-table" class="w-full border border-gray-200 rounded-lg overflow-hidden text-left">
          <thead class="bg-orange-100 text-orange-800">
            <tr>
              <th class="p-3">Name</th>
              <th class="p-3">Rating</th>
              <th class="p-3">Feedback</th>
            </tr>
          </thead>
          <tbody id="feedback-body" class="bg-white divide-y divide-gray-200 text-gray-700">
            <!-- Data will load here -->
          </tbody>
        </table>
      </div>
    </div>
  </section>

  <!-- Contact -->
  <section id="contact" class="bg-white py-12 px-4">
    <div class="max-w-4xl mx-auto text-center">
      <h2 class="text-2xl font-bold text-orange-700 mb-4">Contact Us</h2>
      <p class="text-lg mb-2">üìû <strong>Phone:</strong> <a href="tel:9324410301" class="text-blue-600 hover:underline">9324410301</a></p>
      <p class="text-lg mb-2">üìß <strong>Email:</strong> <a href="mailto:desicruncho@gmail.com" class="text-blue-600 hover:underline">desicruncho@gmail.com</a></p>
      <p class="text-lg">üìç <strong>Address:</strong> Vashi, Navi Mumbai ‚Äì 400703</p>
    </div>
  </section>

  <!-- Footer -->
  <footer class="bg-orange-600 text-white text-center py-4 mt-8">
    &copy; 2025 Desi Cruncho. All rights reserved.
  </footer>

  <!-- Scripts -->
  <script>
    const SCRIPT_URL = "https://script.google.com/macros/s/AKfycby5kiqhgs59RSiveEKARlpI8c_zOaZ46vrbv3uuTzWJS0VbSuyVKEMU-_F_Ykk9eA/exec";

    function logEvent(eventType, product="") {
      fetch(SCRIPT_URL, {
        method: "POST",
        headers: {"Content-Type": "application/json"},
        body: JSON.stringify({
          Timestamp: new Date().toLocaleString(),
          EventType: eventType,
          Product: product,
          PageURL: window.location.href,
          Reffers: document.referrer || "Direct"
        })
      })
      .then(res => {
        if (!res.ok) {
          console.error("‚ùå Network response was not ok", res.status);
        }
      })
      .catch(err => console.error("‚ùå Tracking failed", err));
    }

    // `window.onload` event listener
    window.onload = function() {
        logEvent("Page Load");
    };

    document.querySelectorAll(".order-button").forEach(btn => {
      btn.addEventListener("click", () => {
        const product = btn.getAttribute("data-product");
        const price = product === "Thekua" ? 280 : 300;
        btn.href = `https://wa.me/919324410301?text=Hi! I want to order 800gm ${product} for ‚Çπ${price} from Desi Cruncho.`;
        logEvent("Product Click", product);
      });
    });

    function applyCoupon() {
      const code = document.getElementById("coupon-code").value.trim();
      const message = document.getElementById("coupon-message");
      if(code.toLowerCase() === "ganpatibappa784") {
        document.getElementById("thekua-price").innerText = `Price: ‚Çπ238`;
        document.getElementById("nimki-price").innerText = `Price: ‚Çπ255`;
        message.innerText = "üéâ Coupon Applied Successfully!";
        message.classList.remove("text-red-500");
        message.classList.add("text-green-600");
        // Custom modal instead of alert()
        showCustomModal("üéâ Coupon Applied Successfully! Prices updated.");
      } else {
        message.innerText = "‚ùå Invalid Coupon Code";
        message.classList.remove("text-green-600");
        message.classList.add("text-red-500");
        // Custom modal instead of alert()
        showCustomModal("‚ùå Invalid Coupon Code. Please try again.");
      }
    }

    // Custom Modal/Alert Box
    function showCustomModal(message) {
      const modal = document.createElement("div");
      modal.className = "fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full flex justify-center items-center z-50";
      modal.innerHTML = `
        <div class="bg-white p-8 rounded-lg shadow-xl text-center max-w-sm mx-auto">
          <p class="text-xl font-semibold text-gray-800">${message}</p>
          <button onclick="this.parentElement.parentElement.remove()" class="mt-4 px-6 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition">OK</button>
        </div>
      `;
      document.body.appendChild(modal);
    }
    
    // Live Feedback
    async function loadGoogleFormFeedback() {
      const response = await fetch("https://docs.google.com/spreadsheets/d/12fJOMofbZw0kEh6PxysAGUZRf9M_yyRAFQzxdw8CLZ8/gviz/tq?tqx=out:json");
      const text = await response.text();
      const json = JSON.parse(text.substring(47).slice(0, -2));
      const tbody = document.getElementById("feedback-body");
      tbody.innerHTML = "";
      json.table.rows.forEach(row => {
        const name = row.c[1]?.v || "Anonymous";
        const ratingValue = parseInt(row.c[2]?.v) || 0;
        const rating = "‚≠ê".repeat(ratingValue);
        const feedback = row.c[3]?.v || "No message.";
        const tr = document.createElement("tr");
        tr.innerHTML = `<td class="p-3">${name}</td><td class="p-3 text-yellow-500">${rating}</td><td class="p-3">${feedback}</td>`;
        tbody.appendChild(tr);
      });
    }

    loadGoogleFormFeedback();
  </script>

</body>
</html>
